name: test_python

on:
  workflow_dispatch

env:
  IICS_USER_NAME: ${{ secrets.IICS_USER_NAME }}
  IICS_PASSWORD: ${{ secrets.IICS_password }}
  IICS_LOGIN_URL: ${{ vars.IICS_LOGIN_URL }}
  IICS_LOGOUT_URL: ${{ vars.IICS_LOGOUT_URL }}

jobs:
  informatica_processing:
    name: "Informatica Processing"
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout DEV branch"
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: "Install Python"
        uses: actions/setup-python@v3
        with:
          python-version: '3.x'

      - name: "Install python Modules"
        run: | 
          python -m pip install --upgrade pip
          pip install requests
      
      - name: "IICS login"
        run: | 
          echo "IICS-USER-NAME: $IICS_USER_NAME "
          echo “TEST_ENV=TEST” >> $GITHUB_ENV
          echo “TEST_GIT_SHA=477336d90409008160563c4a29bfb7157321bd00” >> $GITHUB_ENV
          python ./cicd/simply.py 'TEST' '477336d90409008160563c4a29bfb7157321bd00'
